function e(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}function t(e,t="default"){const a={small:"w-4 h-4",default:"w-5 h-5",large:"w-6 h-6"},n=a[t]||a.default;return{close:`<svg class="${n}" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n        </svg>`,link:`<svg class="${n} text-black-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>\n        </svg>`,file:`<svg class="${n} text-black-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>\n        </svg>`}[e]||""}class a{constructor(){this.init()}init(){this.initSingleImageUpload(),this.initMultipleImageUpload(),this.initFileListUpload(),this.initDragDropUpload(),this.initProgressUpload()}initSingleImageUpload(){const e=document.getElementById("upload-file"),t=document.getElementById("uploaded-img__preview"),a=document.querySelector(".uploaded-img"),n=document.querySelector(".uploaded-img__remove");e&&t&&a&&n&&(e.addEventListener("change",e=>{if(e.target.files.length){const n=URL.createObjectURL(e.target.files[0]);t.src=n,a.classList.remove("hidden")}}),n.addEventListener("click",()=>{t.src&&t.src.startsWith("blob:")&&URL.revokeObjectURL(t.src),t.src="",a.classList.add("hidden"),e.value=""}))}initMultipleImageUpload(){const e=document.getElementById("upload-file-multiple"),t=document.querySelector(".uploaded-imgs-container");e&&t&&e.addEventListener("change",a=>{const n=a.target.files;Array.from(n).forEach(e=>{if(!e.type.startsWith("image/"))return;const a=URL.createObjectURL(e),n=this.createImageContainer(a);t.appendChild(n)}),e.value=""})}createImageContainer(e){const a=document.createElement("div");a.classList.add("relative","h-[120px]","w-[120px]","border","border-dashed","border-accent-200","rounded-lg","overflow-hidden","bg-accent-100");const n=document.createElement("button");n.type="button",n.classList.add("absolute","top-0","right-0","z-10","text-error-400","hover:text-error-500","m-2","flex"),n.innerHTML=t("close");const r=document.createElement("img");return r.classList.add("w-full","h-full","object-cover"),r.src=e,n.addEventListener("click",()=>{URL.revokeObjectURL(e),a.remove()}),a.appendChild(n),a.appendChild(r),a}initFileListUpload(){const e=document.getElementById("file-upload-name"),t=document.getElementById("uploaded-img-names");e&&t&&e.addEventListener("change",a=>{const n=a.target.files;t.classList.add("show-uploaded-img-name"),Array.from(n).forEach(e=>{const a=this.createFileListItem(e);t.appendChild(a)}),e.value=""})}createFileListItem(e){const a=document.createElement("li");a.classList.add("flex","items-center","gap-2","p-2","bg-accent-100","rounded-lg","body-small","text-black-400");const n=document.createElement("div");n.innerHTML=t("link","small");const r=document.createElement("span");r.textContent=e.name,r.classList.add("flex-1");const d=document.createElement("button");return d.type="button",d.classList.add("text-error-400","hover:text-error-500","flex"),d.innerHTML=t("close","small"),d.addEventListener("click",()=>{a.remove()}),a.appendChild(n),a.appendChild(r),a.appendChild(d),a}initDragDropUpload(){const e=document.getElementById("drag-drop-area"),t=document.getElementById("drag-drop-input"),a=document.getElementById("drag-drop-files");e&&t&&a&&(["dragenter","dragover","dragleave","drop"].forEach(t=>{e.addEventListener(t,this.preventDefaults,!1),document.body.addEventListener(t,this.preventDefaults,!1)}),["dragenter","dragover"].forEach(t=>{e.addEventListener(t,()=>this.highlight(e),!1)}),["dragleave","drop"].forEach(t=>{e.addEventListener(t,()=>this.unhighlight(e),!1)}),e.addEventListener("drop",e=>{const t=e.dataTransfer.files;this.handleDragDropFiles(t,a)},!1),t.addEventListener("change",e=>{const t=e.target.files;this.handleDragDropFiles(t,a)},!1),e.addEventListener("click",e=>{"INPUT"!==e.target.tagName&&t.click()}),this.initUploadVariants())}initUploadVariants(){[{area:"primary-upload-area",input:"primary-upload"},{area:"secondary-upload-area",input:"secondary-upload"},{area:"success-upload-area",input:"success-upload"}].forEach(e=>{const t=document.getElementById(e.area),a=document.getElementById(e.input);t&&a&&(["dragenter","dragover","dragleave","drop"].forEach(e=>{t.addEventListener(e,this.preventDefaults,!1)}),["dragenter","dragover"].forEach(e=>{t.addEventListener(e,()=>this.highlightVariant(t),!1)}),["dragleave","drop"].forEach(e=>{t.addEventListener(e,()=>this.unhighlightVariant(t),!1)}),t.addEventListener("drop",e=>{const a=e.dataTransfer.files;this.handleVariantFiles(a,t)},!1),a.addEventListener("change",e=>{const a=e.target.files;this.handleVariantFiles(a,t)},!1),t.addEventListener("click",e=>{"INPUT"!==e.target.tagName&&a.click()}))})}preventDefaults(e){e.preventDefault(),e.stopPropagation()}highlight(e){e.classList.add("border-primary-400","bg-primary-50")}unhighlight(e){e.classList.remove("border-primary-400","bg-primary-50")}handleDragDropFiles(a,n){Array.from(a).forEach(a=>{const r=document.createElement("div");r.classList.add("flex","items-center","gap-3","p-3","bg-accent-100","rounded-lg","body-small","text-black-400");const d=document.createElement("div");d.innerHTML=t("file","small");const s=document.createElement("span");s.textContent=a.name,s.classList.add("flex-1");const i=document.createElement("span");i.textContent=e(a.size),i.classList.add("text-black-300"),r.appendChild(d),r.appendChild(s),r.appendChild(i),n.appendChild(r)})}highlightVariant(e){e.classList.contains("border-primary-400")?e.classList.add("border-primary-500","bg-primary-100"):e.classList.contains("border-secondary-300")?e.classList.add("border-secondary-400","bg-secondary-100"):e.classList.contains("border-success-400")&&e.classList.add("border-success-500","bg-success-100")}unhighlightVariant(e){e.classList.remove("border-primary-500","bg-primary-100","border-secondary-400","bg-secondary-100","border-success-500","bg-success-100")}handleVariantFiles(a,n){let r=n.querySelector(".variant-files-container");r||(r=document.createElement("div"),r.classList.add("variant-files-container","mt-4","space-y-2"),n.appendChild(r)),Array.from(a).forEach(a=>{const n=document.createElement("div");n.classList.add("flex","items-center","gap-3","p-2","bg-accent-100","rounded-lg","body-small","text-black-400");const d=document.createElement("div");d.innerHTML=t("file");const s=document.createElement("span");s.textContent=a.name,s.classList.add("flex-1");const i=document.createElement("span");i.textContent=e(a.size),i.classList.add("text-black-300");const o=document.createElement("button");o.type="button",o.classList.add("text-error-400","hover:text-error-500","flex"),o.innerHTML=t("close","small"),o.addEventListener("click",e=>{e.stopPropagation(),n.remove()}),n.appendChild(d),n.appendChild(s),n.appendChild(i),n.appendChild(o),r.appendChild(n)})}initProgressUpload(){const e=document.getElementById("progress-upload"),t=document.getElementById("progress-container");e&&t&&e.addEventListener("change",a=>{const n=a.target.files;Array.from(n).forEach(e=>{const a=this.createProgressItem(e);t.appendChild(a)}),e.value=""})}createProgressItem(t){const a=document.createElement("div");a.classList.add("p-4","bg-accent-100","rounded-lg");const n=document.createElement("div");n.classList.add("flex","items-center","justify-between","mb-2");const r=document.createElement("span");r.textContent=t.name,r.classList.add("body-small","text-black-400");const d=document.createElement("span");d.textContent=e(t.size),d.classList.add("body-small","text-black-300");const s=document.createElement("div");s.classList.add("w-full","bg-accent-200","rounded-full","h-2");const i=document.createElement("div");return i.classList.add("bg-primary-400","h-2","rounded-full","transition-all","duration-300"),i.style.width="0%",n.appendChild(r),n.appendChild(d),s.appendChild(i),a.appendChild(n),a.appendChild(s),this.simulateUploadProgress(i),a}simulateUploadProgress(e){let t=0;const a=setInterval(()=>{t+=15*Math.random(),t>=100&&(t=100,clearInterval(a),e.classList.remove("bg-primary-400"),e.classList.add("bg-success-400")),e.style.width=t+"%"},200)}}document.addEventListener("DOMContentLoaded",function(){document.querySelector('[id*="upload-file"]')&&new a,document.querySelector(".form-wizard, .form-wizard-labeled")&&new FormWizardManager}),window.ImageUploadManager=a,window.FormWizardManager=FormWizardManager,window.formatFileSize=e;
