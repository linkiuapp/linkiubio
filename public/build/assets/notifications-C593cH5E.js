function e(){if(void 0===window.Echo||void 0===window.pusher)return void setTimeout(e,500);"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission().then(e=>{});const i=document.body;i.classList.contains("super-admin")&&function(){try{window.Echo.channel("platform.store.requests").listen("store.request.created",e=>{t("🏪 Nueva Solicitud de Tienda",`${e.store_name} (${e.business_type}) solicita aprobación`),n("🏪 Nueva Solicitud de Tienda",`<strong>${e.store_name}</strong> (${e.business_type})<br>Documento: ${e.document_type} ${e.document_number}<br>Admin: ${e.admin_name} (${e.admin_email})<br><a href="${e.review_url}" class="text-primary-200 underline">Ver solicitud →</a>`,"info",1e4),o(),function(){const e=document.getElementById("pending-requests-badge");if(e){const t=parseInt(e.textContent)||0;e.textContent=t+1,e.classList.remove("hidden")}}()})}catch(e){}}();const a=i.dataset.storeId;a&&(function(e){try{window.Echo.channel(`store.${e}.orders`).listen("new.order",e=>{t("📦 Nuevo Pedido",`Pedido #${e.order_number} de ${e.customer_name}`),n("📦 Nuevo Pedido",`<strong>Pedido #${e.order_number}</strong><br>Cliente: ${e.customer_name}<br>Total: $${e.total}<br><a href="${e.order_url}" class="text-primary-200 underline">Ver pedido →</a>`,"success",8e3),o()})}catch(i){}}(a),function(e){try{window.Echo.channel(`store.${e}.tickets`).listen("ticket.response",e=>{n("💬 Nueva Respuesta en Ticket",`<strong>Ticket #${e.ticket_number}</strong><br>${e.message}<br><a href="${e.ticket_url}" class="text-primary-200 underline">Ver ticket →</a>`,"info",8e3),t("💬 Nueva Respuesta",`Ticket #${e.ticket_number}: ${e.message}`),o()})}catch(i){}}(a));const r=i.dataset.orderId;r&&function(e){try{window.Echo.channel(`order.${e}`).listen("status.changed",e=>{const i=document.getElementById("order-status");i&&(i.textContent=e.status_text,i.className=`px-3 py-1 rounded-full text-sm font-medium ${e.status_class}`),n("🔄 Pedido Actualizado",e.message,"info",5e3),document.hidden&&t("🔄 Pedido Actualizado",e.message),o(.3)})}catch(i){}}(r),function(){try{window.Echo.channel("platform.announcements").listen("new.announcement",e=>{n("📢 "+e.title,e.message,"warning",1e4),t("📢 "+e.title,e.message),o(),e.show_popup&&"critical"===e.type&&window.dispatchEvent(new CustomEvent("show-announcement-popup",{detail:{id:e.id,title:e.title,content:e.message,type:e.type,type_icon:e.type_icon,type_color:"error",priority:e.priority,published_at:e.created_at,banner_image_url:null,banner_link:null,show_url:window.location.origin+"/admin/"+window.store.slug+"/announcements/"+e.id}}))})}catch(e){}}()}function t(e,t){if("Notification"in window&&"granted"===Notification.permission)try{new Notification(e,{body:t,icon:"/favicon.ico",badge:"/favicon.ico",tag:"linkiu-notification",requireInteraction:!1})}catch(n){}}function n(e,t,n="info",o=5e3){const i=function(){let e=document.getElementById("toast-container");e||(e=document.createElement("div"),e.id="toast-container",e.className="fixed top-4 right-4 z-[9999] flex flex-col gap-2",document.body.appendChild(e));return e}(),a=document.createElement("div");a.className=`toast-notification ${n} animate-slide-in`;a.innerHTML=`\n        <div class="flex items-start gap-3 p-4 rounded-lg border-2 ${{success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"}[n]} shadow-lg max-w-md">\n            <div class="flex-1">\n                <h4 class="font-bold text-sm mb-1">${e}</h4>\n                <div class="text-xs">${t}</div>\n            </div>\n            <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600 text-xl leading-none">&times;</button>\n        </div>\n    `,i.appendChild(a),setTimeout(()=>{a.classList.add("animate-slide-out"),setTimeout(()=>a.remove(),300)},o)}function o(e=.5){try{const t=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUKXi8LZjHAU2kNXzzn0xBSF1xe/glUELElyx6OyrWBUIQ5zd8sFuJAUuhM/z24k2Bhxqve/mnE4MDU+k4vC2ZBwENY/U8M5/MwUgcsPu4JhEDBFaquLwq1gVB0Kb3PLBbyQFLoTP89yJNgYca77v5Z1ODAxOpd/vtmQcBDWP0/DPgDQFIG/D7t+aRQ0QV6nj8axaFwZAmNryvnAmBSuCzvLaiTQHHWi87+SfTw0LTafg77ViFAU1jtTwz4I0Bh9uxe7fmUYOEFWo4/KsWhgGP5bZ8r52KAUrgs/y24o1Bh1nu+7koE8OCkun4O+2YhQEM47U8dCBMwYeb8Xu35tGDhBTqOL");t.volume=e,t.play().catch(e=>{})}catch(t){}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e();
